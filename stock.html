<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stock | Dashboard</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="user.css">
  <style>
    /* Filters */
    .stock-filters { display: flex; gap: 10px; margin-bottom: 15px; }
    .stock-filters input, .stock-filters select { padding: 8px 12px; border-radius: 6px; border: 1px solid #ddd; flex: 1; }

    /* Modal styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0,0,0,0.7);
    }
    .modal-content {
      background-color: #202528;
      margin: 10% auto;
      padding: 20px;
      border-radius: 10px;
      width: 400px;
      color: #fff;
    }
    .modal-content h2 { text-align: center; margin-bottom: 15px; }
    .modal-content input, .modal-content select {
      width: 100%; padding: 8px 12px; margin: 6px 0; border-radius: 6px; border: 1px solid #ccc; background-color: #2a2e31; color: #fff;
    }
    .modal-content button {
      margin-top: 10px;
      width: 100%;
      padding: 8px;
      background-color: #4caf50;
      border: none;
      color: #fff;
      border-radius: 6px;
      cursor: pointer;
    }
    .close-modal { float: right; font-size: 24px; cursor: pointer; }

    /* Buttons in table */
    .btn-action { padding: 6px 10px; border-radius: 6px; border: none; cursor: pointer; margin-right: 5px; color: #fff; font-size: 14px; }
    .btn-edit { background-color: #4cafef; }
    .btn-edit:hover { background-color: #3a8ed6; }
    .btn-delete { background-color: #f44336; }
    .btn-delete:hover { background-color: #c62828; }

    /* Add Item Button */
    .btn-add { display: flex; align-items: center; background: #202528; border: none; color: #fff; padding: 8px 14px; border-radius: 6px; cursor: pointer; transition: 0.3s; }
    .btn-add:hover { background: #3a8ed6; }
    .btn-add span { margin-right: 6px; }
  </style>
</head>
<body>
<div class="container">
  <!-- Sidebar Section -->
  <aside>
    <div class="toggle">
      <div class="logo">
        <img src="images/logo.png">
        <h2>Asmr<span class="danger">Prog</span></h2>
      </div>
      <div class="close" id="close-btn">
        <span class="material-icons-sharp">close</span>
      </div>
    </div>
    <div class="sidebar">
      <a href="index.html"><span class="material-icons-sharp">dashboard</span><h3>Dashboard</h3></a>
      <a href="users.html"><span class="material-icons-sharp">person_outline</span><h3>Users</h3></a>
      <a href="orders.html"><span class="material-icons-sharp">receipt_long</span><h3>Orders</h3></a>
      <a href="stock.html" class="active"><span class="material-icons-sharp">inventory</span><h3>Stock</h3></a>
      <a href="#"><span class="material-icons-sharp">insights</span><h3>Analytics</h3></a>
      <a href="#"><span class="material-icons-sharp">settings</span><h3>Settings</h3></a>
      <a href="#"><span class="material-icons-sharp">logout</span><h3>Logout</h3></a>
    </div>
  </aside>

  <!-- Main Content -->
  <main>
    <h1>Stock</h1>

    <div class="users-header">
      <h2>Manage Items</h2>
      <button class="btn-add" onclick="openAddItemModal()"><span class="material-icons-sharp">add</span> Add Item</button>
    </div>

    <!-- Filters -->
    <div class="stock-filters">
      <input type="text" id="searchItemInput" placeholder="Search items..." onkeyup="filterItems()">
      <select id="categoryFilter" onchange="filterItems()">
        <option value="">All Categories</option>
        <option value="Shirts">Shirts</option>
        <option value="Pants">Pants</option>
        <option value="Shoes">Shoes</option>
      </select>
    </div>

    <!-- Stock Table -->
    <div class="users-table">
      <table>
        <thead>
          <tr><th>Item Name</th><th>Category</th><th>Quantity</th><th>Price</th><th>Actions</th></tr>
        </thead>
        <tbody id="stockTableBody">
          <tr id="row-1">
            <td>Blue Shirt</td><td>Shirts</td><td>50</td><td>$25</td>
            <td>
              <button class="btn-action btn-edit" id="edit-1" onclick="openEditModal(1)">Edit</button>
              <button class="btn-action btn-delete" id="delete-1" onclick="deleteItem(1)">Delete</button>
            </td>
          </tr>
          <tr id="row-2">
            <td>Black Pants</td><td>Pants</td><td>30</td><td>$40</td>
            <td>
              <button class="btn-action btn-edit" id="edit-2" onclick="openEditModal(2)">Edit</button>
              <button class="btn-action btn-delete" id="delete-2" onclick="deleteItem(2)">Delete</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </main>

  <!-- Right Section (unchanged) -->
  <div class="right-section">
    <div class="nav">
      <button id="menu-btn"><span class="material-icons-sharp">menu</span></button>
      <div class="dark-mode"><span class="material-icons-sharp active">light_mode</span><span class="material-icons-sharp">dark_mode</span></div>
      <div class="profile">
        <div class="info"><p>Hey, <b>Reza</b></p><small class="text-muted">Admin</small></div>
        <div class="profile-photo"><img src="images/profile-1.jpg"></div>
      </div>
    </div>
    <div class="user-clock"><h2 id="clock-time">00:00:00</h2><p id="clock-date"></p><canvas id="analog-clock" width="180" height="180"></canvas></div>
    <div class="reminders">
      <div class="header"><h2>Reminders</h2><span class="material-icons-sharp">notifications_none</span></div>
      <div class="notification">
        <div class="icon"><span class="material-icons-sharp">volume_up</span></div>
        <div class="content"><div class="info"><h3>Workshop</h3><small class="text_muted">08:00 AM - 12:00 PM</small></div><span class="material-icons-sharp">more_vert</span></div>
      </div>
      <div class="notification deactive">
        <div class="icon"><span class="material-icons-sharp">edit</span></div>
        <div class="content"><div class="info"><h3>Workshop</h3><small class="text_muted">08:00 AM - 12:00 PM</small></div><span class="material-icons-sharp">more_vert</span></div>
      </div>
      <div class="notification add-reminder">
        <div><span class="material-icons-sharp">add</span><h3>Add Reminder</h3></div>
      </div>
    </div>
  </div>
</div>

<!-- Add Item Modal -->
<div id="addItemModal" class="modal">
  <div class="modal-content">
    <span class="close-modal" onclick="closeAddItemModal()">&times;</span>
    <h2>Add New Item</h2>
    <input type="text" id="itemName" placeholder="Item Name">
    <select id="itemCategory"><option value="">Select Category</option><option value="Shirts">Shirts</option><option value="Pants">Pants</option><option value="Shoes">Shoes</option></select>
    <input type="number" id="itemQuantity" placeholder="Quantity">
    <input type="number" id="itemPrice" placeholder="Price">
    <button onclick="addItem()">Add Item</button>
  </div>
</div>

<!-- Edit Item Modal -->
<div id="editItemModal" class="modal">
  <div class="modal-content">
    <span class="close-modal" onclick="closeEditModal()">&times;</span>
    <h2>Edit Item</h2>
    <input type="text" id="editItemName" placeholder="Item Name">
    <select id="editItemCategory"><option value="">Select Category</option><option value="Shirts">Shirts</option><option value="Pants">Pants</option><option value="Shoes">Shoes</option></select>
    <input type="number" id="editItemQuantity" placeholder="Quantity">
    <input type="number" id="editItemPrice" placeholder="Price">
    <button onclick="saveEditItem()">Save Changes</button>
  </div>
</div>

<script>
let itemCounter = 2;
let editId = null;

// Modal Functions
const addItemModal = document.getElementById("addItemModal");
const editItemModal = document.getElementById("editItemModal");

function openAddItemModal() { addItemModal.style.display = "block"; }
function closeAddItemModal() { addItemModal.style.display = "none"; }
function openEditModal(id){
  editId = id;
  const row = document.getElementById(`row-${id}`);
  const cells = row.getElementsByTagName("td");
  document.getElementById("editItemName").value = cells[0].innerText;
  document.getElementById("editItemCategory").value = cells[1].innerText;
  document.getElementById("editItemQuantity").value = cells[2].innerText;
  document.getElementById("editItemPrice").value = cells[3].innerText.replace('$','');
  editItemModal.style.display = "block";
}
function closeEditModal() { editItemModal.style.display = "none"; }

window.onclick = e => {
  if(e.target == addItemModal) addItemModal.style.display = "none";
  if(e.target == editItemModal) editItemModal.style.display = "none";
}

// Add Item
function addItem() {
  const name = document.getElementById("itemName").value;
  const category = document.getElementById("itemCategory").value;
  const quantity = document.getElementById("itemQuantity").value;
  const price = document.getElementById("itemPrice").value;
  if(!name || !category || !quantity || !price){ alert("All fields are required!"); return; }

  itemCounter++;
  const table = document.getElementById("stockTableBody");
  const row = table.insertRow();
  row.id = `row-${itemCounter}`;
  row.innerHTML = `<td>${name}</td><td>${category}</td><td>${quantity}</td><td>$${price}</td>
    <td>
      <button class="btn-action btn-edit" id="edit-${itemCounter}" onclick="openEditModal(${itemCounter})">Edit</button>
      <button class="btn-action btn-delete" id="delete-${itemCounter}" onclick="deleteItem(${itemCounter})">Delete</button>
    </td>`;
  closeAddItemModal();
  document.getElementById("itemName").value="";
  document.getElementById("itemCategory").value="";
  document.getElementById("itemQuantity").value="";
  document.getElementById("itemPrice").value="";
}

// Save Edit
function saveEditItem(){
  if(editId === null) return;
  const row = document.getElementById(`row-${editId}`);
  const cells = row.getElementsByTagName("td");
  cells[0].innerText = document.getElementById("editItemName").value;
  cells[1].innerText = document.getElementById("editItemCategory").value;
  cells[2].innerText = document.getElementById("editItemQuantity").value;
  cells[3].innerText = `$${document.getElementById("editItemPrice").value}`;
  closeEditModal();
}

// Delete Item
function deleteItem(id){ if(confirm("Are you sure you want to delete this item?")){ document.getElementById(`row-${id}`).remove(); }}

// Search & Filter
function filterItems(){
  const searchValue = document.getElementById("searchItemInput").value.toLowerCase();
  const categoryValue = document.getElementById("categoryFilter").value;
  const table = document.getElementById("stockTableBody");
  const rows = table.getElementsByTagName("tr");
  for(let i=0;i<rows.length;i++){
    const cells = rows[i].getElementsByTagName("td");
    const name = cells[0].innerText.toLowerCase();
    const category = cells[1].innerText;
    const matchSearch = name.includes(searchValue);
    const matchCategory = categoryValue === "" || category === categoryValue;
    rows[i].style.display = (matchSearch && matchCategory) ? "" : "none";
  }
}
</script>

<script src="index2.js"></script>
</body>
</html>
